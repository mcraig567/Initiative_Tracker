{% extends "tracker/layout.html" %}

{% block title %}
<title>Initiative tracker</title>
{% endblock %}

{% block body %}
<h1>Keep Track of Turns and Spells!</h1>
<h2>Current Battle</h2>
<ul>
    {% for player in players|dictsortreversed:"initiative" %}
        {% if forloop.counter0 == active_player %}
            <b>
            <li>{{ player.name }} - Init: {{ player.initiative }}</li> 
            </b>

        {% else %}
            <li>{{ player.name }} - Init: {{ player.initiative }}</li>

        {% endif %}

        <form action="{% url 'dead' player.id %}" method="POST">
            {% csrf_token %}
            <input type="submit" name="dead" value="kill">
        </form>

    {% empty %}
        No players yet
    {% endfor %}
</ul>

<h2>Active Spells</h2>
<ul>
    {% for spell in spells %}
    <li>
        {{ spell.name }} - Remaining Time: {{ spell.duration }}
    </li>
    {% endfor %}

</ul>

<form action="{% url 'turn' %}" method="POST">
    {% csrf_token %}
    <input type="submit" value="End Turn">
</form>
<br>
<form action="{% url 'clear' %}" method="POST">
    {% csrf_token %}
    <input type="submit" value="End Battle">
</form>
<br>
<a href="{% url 'add_player' %}">Add Character to Battle</a>
<br>
<a href="{% url 'spell' %}">Add Spell</a>







{% endblock %}